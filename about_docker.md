![image](https://user-images.githubusercontent.com/51132077/86273937-ec19d700-bc0b-11ea-9a33-e00a0525e0de.png)
**※명령어 사용법은 3번부터**   

# **1. 도커 개념**   
### +VMware, VirtualBox 같은 **기존 가상화 플랫폼과의 차이**
VMware ,VirtualBox 같은 가상화 플랫폼과 비슷하면서도 아주 다릅니다.   
VMware, VirtualBox 같은 기존 가상화 방식은 주로 **OS (운영체제, Operating System)** 를 가상화하였습니다.   
![image](https://user-images.githubusercontent.com/51132077/86275290-005ed380-bc0e-11ea-8632-e4e0e0d62761.png)   
기존 가상화 방식은 위 그림처럼 **호스트 OS** 위에 **게스트 OS**를 두어 사용하는 방식입니다.   
쉽게 말해서 PC 위에 새로운 PC를 설치하여 사용한다고 생각하시면 됩니다.  
이 방식을 사용한다고 생각하니 상상만으로도 무거워보이고 느려보입니다.   
*실제로도 그렇습니다.*   

(※현재 저희가 우분투라는 OS를 설치한 방법은 호스트 PC 위에 설치한 것이 아니라 기존 호스트 OS와는 독립적으로 설치하여 호스트 OS를 하나 더 만들어서 사용하고 있기에 가상화 방식이 아닙니다.)   
    
 ### +**컨테이너**란
이런 불편함을 극복하기 위해 나온 것이 바로 **도커**입니다.   
도커는 **컨테이너 기반의 오픈소스 가상화 플랫폼**입니다.   
   
여기서 말하는 **컨테이너**란 배에 실는 네모난 화물 수송용 박스를 생각하실텐데 맞습니다.   
각각의 컨테이너 안에는 빵, 음료수, 옷, 전자제품 등 다양한 화물을 넣을 수 있습니다.   
도커에서도 마찬가지고 다양한 프로그램, 실행환경을 하나의 컨테이너에 다 넣고 컨테이너 단위로 관리를 하는 것입니다.   
   
![image](https://user-images.githubusercontent.com/51132077/86277021-f38faf00-bc10-11ea-95a0-aeff9bbd2f40.png)   
기존 가상화 방식과는 달리, 게스트 OS를 만들지 않고 컨테이너를 생성합니다.   
컨테이너는 하나의 프로세스라고 볼 수 있는데 새로운 PC를 만드는 방식보다 훨씬 가볍고 빠르게 동작합니다.   
CPU나 메모리는 딱 프로세스가 필요한 만큼만 추가로 사용하거 성능적으로도 거의 손실이 없습니다.   
   
 ### +**이미지**란   
 도커에서 가장 중요한 개념 두 가지 중 하나는 **컨테이너**고, 또 다른 하나는 **이미지**입니다.   
 개념적으로는 **컨테이너 실행이 필요한 파일과 설정 값 등을 포함하고 있는 것으로 상태값을 가지지 않고 변하지 않는 것**입니다.   
 컨테이너는 이미지를 실행한 상태이고 추가되거나 변하는 값은 컨테이너에 저장이 됩니다.   
 같은 이미지에서 여러 개의 컨테이너를 생성할 수 있고 컨테이너의 상태가 바뀌거나 컨테이너가 삭제되더라도 이미지는 변하지 않고 그대로 남아있습니다.   
    
``` 
컨테이너와 이미지에 대해 개념적으로 이해하는 것이 제일 좋으나 혹시 몰라 경험적으로 설명드리자면 저희가 우분투를 설치하려 할 때 다운 받은 .ISO 파일을 생각하시면 됩니다.   
그 파일은 우분투의 이미지 파일이고 저희는 이 이미지 파일을 통해 우분투라는 컨테이너를 생성했다고 생각하시면 됩니다.   
저희가 설치한 우분투에서 아무리 작업을 해도 USB에 담긴 .ISO에는 아무런 영향이 없으며 작업 내용은 다 컨테이너에만 저장되게 됩니다.   
또한 .ISO 파일이 담긴 USB로 여러 명이 우분투를 설치했듯이 같은 이미지로 여러 개의 컨테이너를 생성할 수 있었습니다.
```
   
# **2. 도커 작업 상황**   
개발 환경 구축이 끝나신 상태라면 ISO 파일을 통해 **우분투를 설치**하셨고, **도커를 설치**하고 autoware 이미지 파일을 다운 받고 이걸로  **autoware 컨테이너**를 생성하셨을 겁니다.   
* 이미지 파일은 인터넷에서 다운 받을 수도 있으나 **직접 생성** 할 수도 있습니다.   
* 매번 이미지 파일을 이용해 컨테이너를 실행하기 때문에 컨테이너에서 작업한 내용들은 **꼭! 이미지 파일로 저장해야 다음에 실행할 때 우울해하지 않을 겁니다.**   
* 컨테이너를 종료하기 전에 **이미지 파일을 저장하는 습관**을 가져야...   
   
# **3. 도커 명령어**   
## **도커 버전 확인**
```
docker -v 
```
## **도커 이미지 가져오기** : 이미지 공식 저장소가 있기에 아래 명령어를 입력하시면 저장소에서 이미지를 다운받습니다.   
```
 docker pull [이미지 이름]:[태그]
 ```
 예시 :  centos:7 이미지를 다운 받고 싶다면..!
 ```
 docker pull centos:7
 ```
 ## **갖고 있는 이미지 목록 확인**
 ```
 docker images
 ```
 
## **이미지로 컨테이너 생성**   
```
 docker create [옵션] [이미지 이름]:[태그]
 ```
 예시 : 다운 받은 centos:7 이미지로 컨테이너를 생성한다면..!
 ```
 docker create -i -t centos:7
 ```
 ## **컨테이너 실행**   
```
docker start centos:7
 ```
 
 ## **컨테이너 생성과 실행을 동시에** : 보통은 생성과 실행을 같이 하기에 위 2개 명령어보다 이 명령어를 많이 사용합니다.
 ```
 docker run [옵션] [이미지 이름]:[태그] 
 ```
 **현재 run.sh 파일에 autoware 이미지를 run하는 명령어가 들어있으니 run.sh를 실행시키면 됩니다아. 중요합니다 여기!!!!!!!!!!!   
 ## **컨테이너 목록 확인**   
 ```
 docker ps
 ```
 
 ## **이미지 생성** : 작업 내용 날아가지 않고 종료 전에 꼭 실행하길...   
 ```
 docker commit [컨테이너 이름] [이미지 이름]
 ```
 **중요**   
 * 오토웨어 컨테이너에서는 이 명령어를 쳐도 실행이 안 된다.   
 * 새로 터미널 창을 열어서 호스트 아이디가 오토웨가 아님을 확인한다.   
 * docker ps 를 입력하여 실행 중인 컨테이너를 확인하고 오토웨어 컨테이너의 CONTAINER ID를 확인한다.   
 * docker commit [컨테이너 이름] [이미지 이름] 를 입력하여 이미지로 저장 후 docker images로 저장 잘 됐는 지 확인   
 ## **컨테이너 삭제**   
 ```
 docker rm [컨테이너 이름]
 ```
 ## **이미지 삭제**
 ```
 docker rmi [이미지 이름
 ```
    
 많이 쓰이는 것들은 이 정도... 더 추가 예정   
 
# **4. 메뉴얼**   
## **none image 삭제**   
원인 : 동일한 이미지 이름을 가진 이미지가 새로 생긴 경우, 기존 이미지는 tag가 none으로 변경된 상태로 남아 있게 된다. 용량을 많이 차지 할 경우 **확실한 판단**에 따라 아래 명령어를 통해 삭제
![Screenshot from 2020-07-01 13-55-10](https://user-images.githubusercontent.com/51132077/86204513-9fe67c80-bba2-11ea-8d96-610b3a573f7f.png)   
```
docker rmi $(docker images -f "dangling=true" -q)
```

